---
title: 浏览器线程
nav:
  path: /basic
  title: 基础
  order: 100
group:
  path: /basic/browser
  order: 200
---

### 浏览器线程

1. 进程和线程区别
   > 进程是 cpu 资源分配的最小单元， 而线程是 cpu 调度的最小单元， 进程至少存在一个线程
2. 浏览器是多进程的
   > 浏览器每打开一个 tab 都是一个进程
3. 浏览器的进程都包含哪些？
   - **browser 进程(主进程)**
     _浏览器的主进程,负责界面的显示,页面的管理,其他各种进程的管理_
   - **NPAPI 第三方插件进程**
     _每种类型的插件只会有一个进程,每个插件进程可以被多个 Render 进程共享_
   - **GPU 进程**
     _最多一个，用于 3D 绘制。我们常说的启动硬件加速渲染使用的进程，_
   - **Render 渲染进程**
     _多个，默认每个 Tab 页为一个渲染进程。其中包含：GUI 渲染线程、js 引擎线程、事件触发线程、定时触发器线程、异步 http 请求线程等
     其他进程：如插件进程等页面的渲染进程,WebKit 的工作主要在这个进程中完成;_
   - **Pepper 插件进程**
     _同 NPAPI 插件进程,不同的是为 Pepper 插件而创建的进程;_
4. 渲染进程中各个线程之间的关系
   - GUI 线程
     _负责页面样式和 dom 渲染，其中 css 生成 CSS-TREE, dom 生成 DOM-TREE,在构建成 RENDER-TREE_
   - <br
     _当页面需要进行重绘或者回流，会再次执行 GUI 线程_
   - 事件触发线程
   - js 引擎线程
     _负责 js 代码的执行，并等待任务队列的代码执行_<br>
     _js 引擎线程和 GUI 线程是互斥_
   - 定时器线程
     _setInterval 与 setTimeout 所在线程_
   - 异步 http 请求线程
     _在 XMLHttpRequest 在连接后是通过浏览器新开一个线程请求_<br>
     _将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由 JavaScript 引擎执行_
5. GUI 渲染线程与 JS 引擎线程互斥
   > 由于 JavaScript 是可操纵 DOM 的，如果在修改这些元素属性同时渲染界面（即 JS 线程和 UI 线程同时运行），那么渲染线程前后获得的元素数据就可能不一致。因此为了防止渲染出现不可预期的结果，浏览器设置 GUI 渲染线程与 JS 引擎为互斥的关系，当 JS 引擎执行时 GUI 线程会被挂起，GUI 更新则会被保存在一个队列中等到 JS 引擎线程空闲时立即被执行。<br><br>
   > JS 引擎线程可以操作 DOM 属性，会带来页面的页面的重绘和回流， 如果和 GUI 线程可以同步执行会带来不必要的性能消耗
6. JS 阻塞页面加载

7. WebWorker 技术
